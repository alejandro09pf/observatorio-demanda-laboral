<frozen runpy>:128: RuntimeWarning: 'src.orchestrator' found in sys.modules after import of package 'src', but prior to execution of 'src.orchestrator'; this may result in unpredictable behaviour

============================================================
CLUSTERING ANALYSIS
============================================================

Config: manual_300_pre_final.json

13:21:53 - INFO - ================================================================================
13:21:53 - INFO - CLUSTERING: MANUAL_300_PRE_FINAL
13:21:53 - INFO - ================================================================================
13:21:53 - INFO - 
================================================================================
13:21:53 - INFO - EXTRACTING SKILLS
13:21:53 - INFO - ================================================================================
/Users/nicocamacho/Documents/Tesis/observatorio-demanda-laboral/scripts/clustering_analysis.py:64: UserWarning: pandas only supports SQLAlchemy connectable (engine/connection) or database string URI or sqlite3 DBAPI2 connection. Other DBAPI2 objects are not tested. Please consider using SQLAlchemy.
  df = pd.read_sql_query(query, conn)
13:21:53 - INFO -    ‚úÖ Extracted 1914 unique skills
13:21:53 - INFO -    Frequency range: 1 - 97
13:21:53 - INFO -    Total mentions: 6,174
13:21:53 - INFO - 
================================================================================
13:21:53 - INFO - FETCHING EMBEDDINGS
13:21:53 - INFO - ================================================================================
13:21:53 - INFO - Requesting embeddings for 1914 skills...
13:21:53 - INFO -    ‚úÖ Found embeddings: 1914/1914
13:21:53 - INFO -    Coverage: 100.0%
13:21:53 - INFO - 
================================================================================
13:21:53 - INFO - RUNNING UMAP (src/analyzer/dimension_reducer.py)
13:21:53 - INFO - ================================================================================
13:21:53 - INFO - DimensionReducer initialized: n_components=2, n_neighbors=15, min_dist=0.1, metric=cosine
13:21:53 - INFO - Fitting UMAP on 1914 samples with 768 features
13:21:53 - INFO - Parameters: n_neighbors=15, min_dist=0.1, metric=cosine
/Users/nicocamacho/Documents/Tesis/observatorio-demanda-laboral/venv/lib/python3.11/site-packages/umap/umap_.py:1943: UserWarning: n_jobs value -1 overridden to 1 by setting random_state. Use no seed for parallelism.
  warn(f"n_jobs value {self.n_jobs} overridden to 1 by setting random_state. Use no seed for parallelism.")
UMAP(angular_rp_forest=True, metric='cosine', random_state=42, verbose=True)
Sun Nov  9 13:21:53 2025 Construct fuzzy simplicial set
Sun Nov  9 13:21:55 2025 Finding Nearest Neighbors
Sun Nov  9 13:21:56 2025 Finished Nearest Neighbor Search
Sun Nov  9 13:21:57 2025 Construct embedding
Epochs completed:   0%|            0/500 [00:00]Epochs completed:   0%|            1/500 [00:00]Epochs completed:   9%| ‚ñâ          45/500 [00:00]Epochs completed:  17%| ‚ñà‚ñã         85/500 [00:00]Epochs completed:  25%| ‚ñà‚ñà‚ñç        124/500 [00:00]Epochs completed:  33%| ‚ñà‚ñà‚ñà‚ñé       163/500 [00:00]Epochs completed:  40%| ‚ñà‚ñà‚ñà‚ñà       202/500 [00:00]Epochs completed:  48%| ‚ñà‚ñà‚ñà‚ñà‚ñä      242/500 [00:00]Epochs completed:  57%| ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñã     283/500 [00:00]Epochs completed:  65%| ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñç    324/500 [00:00]Epochs completed:  73%| ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñé   365/500 [00:01]Epochs completed:  81%| ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà   406/500 [00:01]Epochs completed:  90%| ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñâ  448/500 [00:01]Epochs completed:  98%| ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñä 489/500 [00:01]Epochs completed: 100%| ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 500/500 [00:01]
13:21:58 - INFO - UMAP transformation complete
13:21:58 - INFO - Output shape: (1914, 2)
13:21:58 - INFO - Coordinate ranges: X=[-0.28, 9.86], Y=[5.82, 11.90]
13:21:58 - INFO - 
================================================================================
13:21:58 - INFO - RUNNING HDBSCAN (src/analyzer/clustering.py)
13:21:58 - INFO - ================================================================================
13:21:58 - INFO - SkillClusterer initialized: min_cluster_size=12, min_samples=3, metric=euclidean
13:21:58 - INFO - Clustering 1914 samples in 2D space
13:21:58 - INFO - Parameters: min_cluster_size=12, min_samples=3
13:21:58 - INFO - Clustering complete
13:21:58 - INFO - Clusters detected: 61
13:21:58 - INFO - Noise points: 455 (23.8%)
13:21:58 - INFO - Cluster sizes: {54: 19, 53: 82, 56: 16, 37: 19, 38: 34, 20: 14, 3: 24, 26: 19, 52: 44, 45: 22, 5: 12, 44: 23, 25: 59, 12: 14, 16: 15, 34: 18, 55: 33, 8: 33, 30: 45, 21: 40, 50: 47, 35: 53, 36: 23, 18: 16, 24: 38, 27: 28, 0: 14, 14: 22, 58: 48, 22: 22, 32: 14, 49: 30, 28: 12, 2: 14, 42: 33, 31: 12, 17: 19, 46: 22, 11: 19, 57: 17, 40: 24, 47: 25, 23: 16, 15: 12, 1: 14, 4: 13, 48: 20, 33: 14, 10: 13, 43: 15, 29: 21, 59: 26, 7: 23, 51: 17, 60: 15, 19: 20, 39: 15, 9: 14, 41: 23, 13: 16, 6: 15}
13:21:58 - INFO - Quality metrics calculated:
13:21:58 - INFO -   Silhouette: 0.456
13:21:58 - INFO -   Davies-Bouldin: 0.636
13:21:58 - INFO - 
üìä Clustering Results:
13:21:58 - INFO -    Clusters: 61
13:21:58 - INFO -    Noise: 455 (23.8%)
13:21:58 - INFO -    Silhouette: 0.456
13:21:58 - INFO -    Davies-Bouldin: 0.636
13:21:58 - INFO - 
================================================================================
13:21:58 - INFO - META-CLUSTERING (Hierarchical Grouping)
13:21:58 - INFO - ================================================================================
13:21:58 - INFO - Clustering 61 fine-grained clusters into meta-clusters...
13:21:58 - INFO - Meta-clusters detected: 2
13:21:58 - INFO - Unclustered fine clusters: 15
13:21:58 - INFO - Meta-clustering Silhouette: 0.236
13:21:58 - INFO - Meta-clustering Davies-Bouldin: 1.572
13:21:58 - INFO - 
üìä Analyzing clusters...
13:21:58 - INFO - 
================================================================================
13:21:58 - INFO - EXTRACTING TEMPORAL DATA
13:21:58 - INFO - ================================================================================
/Users/nicocamacho/Documents/Tesis/observatorio-demanda-laboral/scripts/clustering_analysis.py:150: UserWarning: pandas only supports SQLAlchemy connectable (engine/connection) or database string URI or sqlite3 DBAPI2 connection. Other DBAPI2 objects are not tested. Please consider using SQLAlchemy.
  df = pd.read_sql_query(query, conn)
/Users/nicocamacho/Documents/Tesis/observatorio-demanda-laboral/scripts/clustering_analysis.py:154: UserWarning: Converting to PeriodArray/Index representation will drop timezone information.
  df['quarter_str'] = df['quarter'].dt.to_period('Q').astype(str)
13:21:58 - INFO -    ‚úÖ Extracted temporal data
13:21:58 - INFO -    Quarters: 5
13:21:58 - INFO -    Date range: 2016Q2 - 2025Q4
13:21:58 - INFO - 
================================================================================
13:21:58 - INFO - CREATING TEMPORAL MATRIX
13:21:58 - INFO - ================================================================================
13:21:58 - INFO -    ‚úÖ Matrix shape: (5, 62)
13:21:58 - INFO - 
================================================================================
13:21:58 - INFO - GENERATING VISUALIZATIONS
13:21:58 - INFO - ================================================================================
13:21:58 - INFO - 
üé® UMAP scatter plot (enhanced)...
13:22:01 - INFO -    ‚úÖ Saved: umap_scatter.png (enhanced with labels)
13:22:01 - INFO - 
üé® Temporal heatmap...
13:22:02 - INFO -    ‚úÖ Saved: temporal_heatmap.png
13:22:02 - INFO - 
üé® Top clusters evolution...
13:22:02 - INFO -    ‚úÖ Saved: top_clusters_evolution.png
13:22:02 - INFO - 
================================================================================
13:22:02 - INFO - GENERATING HIERARCHICAL VISUALIZATIONS
13:22:02 - INFO - ================================================================================
13:22:02 - INFO - 
üé® Fine-grained view (colored by meta-cluster with annotations)...
13:22:05 - INFO -    ‚úÖ Saved: umap_fine_by_meta.png
13:22:05 - INFO - 
üé® Macro view (top cluster centroids)...
13:22:05 - INFO -    Showing top 40 clusters (by frequency)
13:22:05 - WARNING -    ‚ö†Ô∏è  adjustText not available, labels may overlap
13:22:07 - INFO -    ‚úÖ Saved: umap_macro_centroids.png
13:22:07 - INFO - 
================================================================================
13:22:07 - INFO - SAVING RESULTS
13:22:07 - INFO - ================================================================================
13:22:07 - INFO -    ‚úÖ results.json
13:22:07 - INFO -    ‚úÖ temporal_matrix.csv
13:22:07 - INFO -    ‚úÖ metrics_summary.json
13:22:07 - INFO - 
================================================================================
13:22:07 - INFO - ‚úÖ CLUSTERING COMPLETE
13:22:07 - INFO - ================================================================================
13:22:07 - INFO -    Dataset: manual_300_pre_final
13:22:07 - INFO -    Skills: 1914
13:22:07 - INFO -    Clusters: 61
13:22:07 - INFO -    Silhouette: 0.456
13:22:07 - INFO -    Output: outputs/clustering/final/manual_300_pre/
13:22:07 - INFO - ================================================================================
	completed  0  /  500 epochs
	completed  50  /  500 epochs
	completed  100  /  500 epochs
	completed  150  /  500 epochs
	completed  200  /  500 epochs
	completed  250  /  500 epochs
	completed  300  /  500 epochs
	completed  350  /  500 epochs
	completed  400  /  500 epochs
	completed  450  /  500 epochs
Sun Nov  9 13:21:58 2025 Finished embedding
