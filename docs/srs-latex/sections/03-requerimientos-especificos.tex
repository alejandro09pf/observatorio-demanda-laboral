\chapter{REQUERIMIENTOS ESPECÍFICOS}

Este capítulo detalla de manera exhaustiva los requerimientos funcionales y no funcionales del sistema, organizados según las categorías definidas en las secciones anteriores.

\section{Requerimientos de Interfaces Externas}

\subsection{Interfaces con el Usuario}

\begin{description}
    \item[REI-01] El sistema debe permitir la ejecución de scripts desde CLI para scraping y visualización.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Interfaz Usuario
        \item Criterio: Ejecución funcional por línea de comandos
    \end{itemize}

    \item[REI-02] El sistema debe incluir notebooks Jupyter con celdas documentadas.
    \begin{itemize}
        \item Prioridad: Media
        \item Módulo: Interfaz Usuario
        \item Criterio: Visualización y reproducción de notebooks
    \end{itemize}

    \item[REI-03] El sistema debe generar reportes en formato PDF, PNG y HTML.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Interfaz Usuario/Visualización
        \item Criterio: Visualización correcta de reportes generados
    \end{itemize}
\end{description}

\subsection{Interfaces con el Hardware}

\begin{description}
    \item[REI-04] El sistema debe operar en equipos sin GPU dedicada y mínimo 8 GB de RAM.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Interfaz Hardware
        \item Criterio: Ejecución sin errores en equipos personales
    \end{itemize}
\end{description}

\subsection{Interfaces con el Software}

\begin{description}
    \item[REI-05] El sistema debe conectarse a una base de datos PostgreSQL local.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Interfaz Software
        \item Criterio: Inserción y lectura desde PostgreSQL
    \end{itemize}

    \item[REI-06] El sistema debe acceder a portales web por HTTP/HTTPS para extraer datos.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Interfaz Comunicación
        \item Criterio: Scraping exitoso desde URLs definidas
    \end{itemize}
\end{description}

\section{Requerimientos Funcionales}

\subsection{Funcionalidad 1: Extracción de Vacantes (Scraping)}

\begin{description}
    \item[RF-01] El sistema debe extraer vacantes desde portales como Computrabajo, Bumeran y elempleo.com.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Scraping
        \item Criterio: Extracción visible y consistente de datos
    \end{itemize}
\end{description}

\subsection{Funcionalidad 2: Procesamiento de Texto}

\begin{description}
    \item[RF-02] El sistema debe almacenar las vacantes en PostgreSQL con deduplicación SHA256.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Almacenamiento
        \item Criterio: Consultas e inserciones validadas, duplicados detectados
        \item Estado: IMPLEMENTADO (23,352 jobs, dedup rate 0.5\%)
    \end{itemize}

    \item[RF-03] El sistema debe preprocesar el texto: limpieza HTML, tokenización, normalización.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Procesamiento NLP
        \item Criterio: Verificación de campos procesados, detección de jobs basura
        \item Estado: IMPLEMENTADO (23,188 jobs limpios, 99.5\% usable)
    \end{itemize}

    \item[RF-04] El sistema debe extraer habilidades explícitas mediante NER y Regex (Pipeline A).
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Extracción
        \item Criterio: Skills extraídas con método y confianza asociados
        \item Métodos:
        \begin{itemize}
            \item Regex: 200+ patrones tecnológicos (78-89\% precision)
            \item NER: spaCy + custom entity ruler (13\% precision con filtros)
        \end{itemize}
        \item Estado: IMPLEMENTADO (Test 100 jobs: 2,756 skills extraídas)
    \end{itemize}
\end{description}

\subsection{Funcionalidad 2.1: Mapeo contra Taxonomía ESCO}

\begin{description}
    \item[RF-04.1] El sistema debe cargar y mantener una taxonomía unificada de 14,174 skills.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Taxonomía (Fase 0)
        \item Criterio: ESCO v1.1.0 (13,939) + O*NET Hot Tech (152) + Manual Curated (83)
        \item Estado: IMPLEMENTADO
    \end{itemize}

    \item[RF-04.2] El sistema debe mapear skills extraídas contra ESCO usando estrategia de dos capas.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Matching
        \item Criterio: Layer 1 (Exact, SQL ILIKE, confidence 1.0), luego Layer 2 (Fuzzy, threshold 0.92). Layer 3 (Semantic) fue deshabilitada tras pruebas que revelaron falsos positivos en contexto técnico.
        \item Estado: IMPLEMENTADO (Layer 1 + 2 activos)
        \item Match rate actual: 12.6\% (esperado para taxonomías 2016-2017)
    \end{itemize}

    \item[RF-04.3] El sistema debe identificar y rastrear skills emergentes no mapeadas.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Emergent Skills Tracking
        \item Criterio: Skills sin match ESCO almacenadas con frecuencia y contexto
        \item Estado: IMPLEMENTADO (87.4\% emergent rate en test de 100 jobs)
    \end{itemize}

    \item[RF-04.4] El sistema debe generar embeddings semánticos para todas las skills.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Embeddings (Fase 0)
        \item Criterio: Modelo intfloat/multilingual-e5-base (768D), L2-normalized
        \item Performance: 721 skills/segundo (GPU), 30 skills/segundo (CPU)
        \item Estado: IMPLEMENTADO (14,133 embeddings, 94.6\% test pass)
    \end{itemize}

    \item[RF-04.5] El sistema debe construir y mantener índice FAISS para búsqueda semántica.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: FAISS Index (Fase 0)
        \item Criterio: IndexFlatIP (exact search), 30,147 queries/segundo
        \item Archivos: data/embeddings/esco.faiss (41.41 MB), esco\_mapping.pkl (545 KB)
        \item Estado: IMPLEMENTADO (25x más rápido que PostgreSQL pgvector)
    \end{itemize}
\end{description}

\subsection{Funcionalidad 3: Representación Semántica}

\begin{description}
    \item[RF-05] El sistema debe generar representaciones semánticas (embeddings) y realizar clustering automático.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Agrupamiento
        \item Criterio: Clústeres coherentes generados
    \end{itemize}
\end{description}

\subsection{Funcionalidad 4: Visualización}

\begin{description}
    \item[RF-06] El sistema debe generar visualizaciones estáticas con gráficas de frecuencia de habilidades y comparativas.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Visualización
        \item Criterio: Visualizaciones exportadas exitosamente
    \end{itemize}
\end{description}

\section{Requerimientos de Desempeño}

\begin{description}
    \item[RDP-01] El sistema debe extraer y almacenar vacantes desde múltiples portales de empleo.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Scraping
        \item Criterio: Mínimo 300 vacantes por país desde dos portales distintos
        \item Performance actual: 23,352 jobs scraped (hiring.cafe: 23,313, elempleo: 38, zonajobs: 1)
        \item Estado: CUMPLIDO (7,784\% sobre mínimo requerido)
    \end{itemize}

    \item[RDP-02] El preprocesamiento textual debe ejecutarse sin errores críticos.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Procesamiento
        \item Criterio: Pipeline completado con success rate > 95\%
        \item Performance actual: 99.5\% usable rate (23,188/23,352 jobs)
        \item Estado: CUMPLIDO
    \end{itemize}

    \item[RDP-03] La generación de embeddings debe completarse en tiempo razonable.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Embeddings (Fase 0)
        \item Criterio: Completar 14K skills en < 5 minutos con GPU
        \item Performance actual: 19.65 segundos para 14,133 skills (721 skills/seg)
        \item Estado: CUMPLIDO (15x mejor que requerimiento)
    \end{itemize}

    \item[RDP-04] La búsqueda semántica con FAISS debe ser eficiente.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: FAISS Index
        \item Criterio: Mínimo 100 queries por segundo
        \item Performance actual: 30,147 queries/segundo (301x sobre requerimiento)
        \item Estado: CUMPLIDO (25x más rápido que PostgreSQL pgvector)
    \end{itemize}

    \item[RDP-05] El sistema de extracción de skills debe procesar jobs sin fallos.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Extracción Pipeline A
        \item Criterio: Success rate > 95\% en procesamiento
        \item Performance actual: 100\% success rate en test de 100 jobs (2,756 skills extraídas)
        \item Tiempo promedio: 1.82 segundos por job
        \item Estado: CUMPLIDO
    \end{itemize}

    \item[RDP-06] El matching contra ESCO debe completarse para todas las skills extraídas.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Matching (2-layer strategy)
        \item Criterio: Todas las skills procesadas por las 2 layers activas (exact + fuzzy con threshold 0.92)
        \item Performance actual: 12.6\% match rate (Layer 1: 5.4\%, Layer 2: 7.1\%)
        \item Estado: CUMPLIDO (Layer 3 semantic deshabilitada por falsos positivos)
        \item Nota: 87.4\% emergent skills es esperado para taxonomías 2016-2017
    \end{itemize}
\end{description}

\section{Restricciones de Diseño}

\begin{description}
    \item[RDZ-01] El sistema debe ejecutarse completamente en local, sin servicios web de pago.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Arquitectura General
        \item Criterio: Funciona sin acceso a servicios externos
    \end{itemize}

    \item[RDZ-02] La ejecución de modelos LLM se limitará a versiones descargables.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Enriquecimiento
        \item Criterio: Modelos configurados desde Hugging Face
    \end{itemize}

    \item[RDZ-03] El desarrollo deberá realizarse en Python 3.10 o superior.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Infraestructura
        \item Criterio: Repositorio sin dependencias privativas
    \end{itemize}

    \item[RDZ-04] No se implementará una interfaz gráfica interactiva.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Visualización
        \item Criterio: El sistema exporta reportes, no tiene frontend
    \end{itemize}

    \item[RDZ-05] El sistema debe ser modular.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Arquitectura General
        \item Criterio: Cada módulo puede lanzarse individualmente
    \end{itemize}
\end{description}

\section{Atributos del Sistema de Software (No funcionales)}

\subsection{Confiabilidad}

\begin{description}
    \item[RNF-01] El sistema debe producir resultados consistentes ante entradas iguales.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Todos
        \item Criterio: Repetición del proceso genera mismos resultados
    \end{itemize}

    \item[RNF-02] Se debe registrar el comportamiento del sistema mediante logs detallados.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Todos
        \item Criterio: Archivos de log por módulo
    \end{itemize}

    \item[RNF-03] En caso de interrupciones, los módulos deben permitir ser reiniciados.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Arquitectura General
        \item Criterio: Pipeline puede reiniciarse parcialmente
    \end{itemize}
\end{description}

\subsection{Disponibilidad}

\begin{description}
    \item[RNF-04] El sistema estará disponible para ejecución local en cualquier momento.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Infraestructura
        \item Criterio: Pipeline completo corre offline
    \end{itemize}

    \item[RNF-05] Scripts y notebooks deben estar organizados en GitHub.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Infraestructura
        \item Criterio: Repositorio contiene notebooks funcionales
    \end{itemize}
\end{description}

\subsection{Seguridad}

\begin{description}
    \item[RNF-06] Se evitará recolectar información personal.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Scraping
        \item Criterio: Ningún campo sensible almacenado
    \end{itemize}

    \item[RNF-07] Los spiders implementarán throttling.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Scraping
        \item Criterio: Tiempo entre requests configurable
    \end{itemize}

    \item[RNF-08] El código incluirá controles básicos de errores.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Todos
        \item Criterio: Pipeline continúa sin detenerse
    \end{itemize}
\end{description}

\subsection{Mantenibilidad}

\begin{description}
    \item[RNF-09] El sistema debe estar documentado a nivel de código.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Todos
        \item Criterio: Documentación presente en repositorio
    \end{itemize}

    \item[RNF-10] Cada módulo será independiente y versionado.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Arquitectura Modular
        \item Criterio: Se puede actualizar un módulo sin afectar demás
    \end{itemize}
\end{description}

\subsection{Portabilidad}

\begin{description}
    \item[RNF-11] El sistema debe poder ejecutarse en Linux, macOS o Windows con WSL.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Infraestructura
        \item Criterio: Se ejecuta en tres sistemas operativos
    \end{itemize}

    \item[RNF-12] Se debe proporcionar un archivo de entorno reproducible.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Infraestructura
        \item Criterio: Archivo requirements.txt ejecutado con éxito
    \end{itemize}
\end{description}

\section{Requerimientos de la Base de Datos}

\begin{description}
    \item[BD-01] El sistema debe utilizar PostgreSQL como sistema de gestión de base de datos.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Almacenamiento
        \item Criterio: PostgreSQL 13+ con soporte para arrays REAL[]
        \item Estado: IMPLEMENTADO
    \end{itemize}

    \item[BD-02] La base de datos debe almacenar vacantes con deduplicación SHA256.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Almacenamiento
        \item Criterio: Hash único por job\_description para prevenir duplicados
        \item Estado: IMPLEMENTADO (0.5\% dedup rate)
    \end{itemize}

    \item[BD-03] La base de datos debe almacenar skills extraídas con método y confianza.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Extracción
        \item Criterio: Tabla job\_extracted\_skills con campos: job\_id, skill, method, confidence
        \item Estado: IMPLEMENTADO
    \end{itemize}

    \item[BD-04] La base de datos debe almacenar embeddings de 768 dimensiones.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Embeddings
        \item Criterio: Tabla skill\_embeddings con columna embedding REAL[768]
        \item Estado: IMPLEMENTADO (14,133 embeddings almacenados)
    \end{itemize}

    \item[BD-05] La base de datos debe mantener trazabilidad de matching ESCO.
    \begin{itemize}
        \item Prioridad: Alta
        \item Módulo: Matching
        \item Criterio: Tabla job\_esco\_matches con layer, confidence score, skill\_id
        \item Estado: IMPLEMENTADO
    \end{itemize}
\end{description}

\section{Trazabilidad de Requerimientos}

La trazabilidad entre los objetivos del proyecto y los requerimientos específicos se presenta en la siguiente tabla:

\begin{table}[H]
\centering
\begin{tabular}{|p{3cm}|p{10cm}|}
\hline
Objetivo & Requerimientos Relacionados \\
\hline
Extracción automatizada de vacantes & RF-01, RDP-01, RNF-06, RNF-07, REI-06 \\
\hline
Procesamiento y limpieza textual & RF-02, RF-03, RDP-02, BD-01, BD-02 \\
\hline
Extracción de habilidades & RF-04, RF-04.1, RF-04.2, RF-04.3, RDP-05, RDP-06, BD-03, BD-05 \\
\hline
Generación de embeddings & RF-04.4, RF-04.5, RDP-03, RDP-04, BD-04 \\
\hline
Clustering de perfiles & RF-05, RDP-03 \\
\hline
Visualización de resultados & RF-06, REI-03, RDZ-04 \\
\hline
Arquitectura modular & RDZ-01, RDZ-03, RDZ-05, RNF-10 \\
\hline
Mantenibilidad y reproducibilidad & RNF-09, RNF-12, REI-01, REI-02 \\
\hline
\end{tabular}
\caption{Trazabilidad entre objetivos y requerimientos}
\end{table}

\section{Validación y Verificación}

Para cada requerimiento especificado se define un método de validación:

\begin{itemize}
    \item Validación por Inspección (VI): Revisión manual de código, logs y resultados
    \item Validación por Prueba (VP): Ejecución de scripts de test automatizados
    \item Validación por Demostración (VD): Ejecución completa del pipeline con datos reales
    \item Validación por Análisis (VA): Evaluación de métricas, tiempos y performance
\end{itemize}

\begin{table}[H]
\centering
\begin{tabular}{|p{2.5cm}|p{2cm}|p{8cm}|}
\hline
Requerimiento & Método & Criterio de Aceptación \\
\hline
RF-01 & VD & Scraping exitoso desde 3+ portales con > 300 jobs por país \\
\hline
RF-02 & VP & Deduplicación funcional, 0 duplicados en test de 1000 jobs \\
\hline
RF-03 & VI & Texto limpio sin HTML, tokens válidos, 552 palabras promedio \\
\hline
RF-04 & VP & Extracción exitosa con 2+ métodos (Regex + NER), success rate > 95\% \\
\hline
RF-04.1 & VP & Taxonomía cargada: 14,174 skills (ESCO + O*NET + Manual) \\
\hline
RF-04.2 & VA & Match rate > 10\%, Layer 1 + Layer 2 activos, threshold fuzzy 0.92 \\
\hline
RF-04.3 & VI & Skills emergentes rastreadas con frecuencia y contexto \\
\hline
RF-04.4 & VA & Embeddings generados en < 5 min (GPU), L2-normalized, 768D \\
\hline
RF-04.5 & VA & FAISS construido en < 1 min, queries > 100/seg \\
\hline
RF-05 & VD & Clustering ejecutado sin errores, clusters coherentes \\
\hline
RF-06 & VI & Visualizaciones exportadas en PDF/PNG/HTML \\
\hline
RDP-01 a RDP-06 & VA & Métricas de performance validadas contra umbrales \\
\hline
RNF-01 a RNF-12 & VI/VD & Tests de reproducibilidad, logs, portabilidad \\
\hline
BD-01 a BD-05 & VP & Queries SQL exitosas, integridad referencial \\
\hline
\end{tabular}
\caption{Métodos de validación por requerimiento}
\end{table}

\section{Estado de Implementación - Resumen}

\begin{table}[H]
\centering
\begin{tabular}{|p{4cm}|p{3cm}|p{6cm}|}
\hline
Módulo/Fase & \textbf{Estado} & Observaciones \\
\hline
Fase 0 - Setup Inicial & COMPLETADO & Taxonomía, embeddings, FAISS index \\
\hline
Fase 1 - Scraping & COMPLETADO & 23,352 jobs, 3 portales \\
\hline
Fase 2 - Pipeline A & COMPLETADO & Regex + NER + Mapping activo \\
\hline
Fase 2 - Pipeline B & COMPLETADO & Extracción con LLMs \\
\hline
Módulo 6 - Clustering & COMPLETADO & HDBSCAN + UMAP \\
\hline
Módulo 7 - Visualización & COMPLETADO & Plotly + reportes analíticos \\
\hline
\end{tabular}
\caption{Estado de implementación por módulo}
\end{table}
