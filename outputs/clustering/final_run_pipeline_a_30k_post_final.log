<frozen runpy>:128: RuntimeWarning: 'src.orchestrator' found in sys.modules after import of package 'src', but prior to execution of 'src.orchestrator'; this may result in unpredictable behaviour

============================================================
CLUSTERING ANALYSIS
============================================================

Config: pipeline_a_30k_post_final.json

17:50:12 - INFO - ================================================================================
17:50:12 - INFO - CLUSTERING: PIPELINE_A_30K_POST_FINAL
17:50:12 - INFO - ================================================================================
17:50:12 - INFO - 
================================================================================
17:50:12 - INFO - EXTRACTING SKILLS
17:50:12 - INFO - ================================================================================
/Users/nicocamacho/Documents/Tesis/observatorio-demanda-laboral/scripts/clustering_analysis.py:64: UserWarning: pandas only supports SQLAlchemy connectable (engine/connection) or database string URI or sqlite3 DBAPI2 connection. Other DBAPI2 objects are not tested. Please consider using SQLAlchemy.
  df = pd.read_sql_query(query, conn)
17:50:12 - INFO -    ‚úÖ Extracted 1698 unique skills
17:50:12 - INFO -    Frequency range: 1 - 4722
17:50:12 - INFO -    Total mentions: 68,152
17:50:12 - INFO - 
================================================================================
17:50:12 - INFO - FETCHING EMBEDDINGS
17:50:12 - INFO - ================================================================================
17:50:12 - INFO - Requesting embeddings for 1698 skills...
17:50:12 - INFO -    ‚úÖ Found embeddings: 1698/1698
17:50:12 - INFO -    Coverage: 100.0%
17:50:12 - INFO - 
================================================================================
17:50:12 - INFO - RUNNING UMAP (src/analyzer/dimension_reducer.py)
17:50:12 - INFO - ================================================================================
17:50:12 - INFO - DimensionReducer initialized: n_components=2, n_neighbors=15, min_dist=0.1, metric=cosine
17:50:12 - INFO - Fitting UMAP on 1698 samples with 768 features
17:50:12 - INFO - Parameters: n_neighbors=15, min_dist=0.1, metric=cosine
/Users/nicocamacho/Documents/Tesis/observatorio-demanda-laboral/venv/lib/python3.11/site-packages/umap/umap_.py:1943: UserWarning: n_jobs value -1 overridden to 1 by setting random_state. Use no seed for parallelism.
  warn(f"n_jobs value {self.n_jobs} overridden to 1 by setting random_state. Use no seed for parallelism.")
UMAP(angular_rp_forest=True, metric='cosine', random_state=42, verbose=True)
Sun Nov  9 17:50:12 2025 Construct fuzzy simplicial set
Sun Nov  9 17:50:13 2025 Finding Nearest Neighbors
Sun Nov  9 17:50:15 2025 Finished Nearest Neighbor Search
Sun Nov  9 17:50:16 2025 Construct embedding
Epochs completed:   0%|            0/500 [00:00]Epochs completed:   0%|            1/500 [00:00]Epochs completed:  10%| ‚ñà          50/500 [00:00]Epochs completed:  19%| ‚ñà‚ñâ         97/500 [00:00]Epochs completed:  29%| ‚ñà‚ñà‚ñâ        144/500 [00:00]Epochs completed:  38%| ‚ñà‚ñà‚ñà‚ñä       191/500 [00:00]Epochs completed:  48%| ‚ñà‚ñà‚ñà‚ñà‚ñä      238/500 [00:00]Epochs completed:  57%| ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñã     285/500 [00:00]Epochs completed:  67%| ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñã    333/500 [00:00]Epochs completed:  76%| ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñå   380/500 [00:01]Epochs completed:  86%| ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñå  428/500 [00:01]Epochs completed:  95%| ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñå 475/500 [00:01]Epochs completed: 100%| ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 500/500 [00:01]
17:50:17 - INFO - UMAP transformation complete
17:50:17 - INFO - Output shape: (1698, 2)
17:50:17 - INFO - Coordinate ranges: X=[1.87, 11.00], Y=[4.35, 12.34]
17:50:17 - INFO - 
================================================================================
17:50:17 - INFO - RUNNING HDBSCAN (src/analyzer/clustering.py)
17:50:17 - INFO - ================================================================================
17:50:17 - INFO - SkillClusterer initialized: min_cluster_size=12, min_samples=3, metric=euclidean
17:50:17 - INFO - Clustering 1698 samples in 2D space
17:50:17 - INFO - Parameters: min_cluster_size=12, min_samples=3
17:50:17 - INFO - Clustering complete
17:50:17 - INFO - Clusters detected: 53
17:50:17 - INFO - Noise points: 378 (22.3%)
17:50:17 - INFO - Cluster sizes: {25: 31, 47: 36, 39: 13, 29: 45, 28: 17, 27: 32, 19: 13, 31: 27, 15: 25, 30: 12, 9: 21, 1: 25, 45: 13, 33: 34, 22: 26, 11: 33, 21: 14, 24: 34, 6: 35, 23: 89, 16: 14, 52: 41, 35: 26, 0: 13, 44: 60, 18: 15, 46: 59, 20: 41, 8: 17, 51: 52, 38: 17, 7: 26, 4: 19, 48: 22, 17: 27, 5: 12, 26: 13, 40: 20, 34: 17, 12: 13, 41: 18, 36: 14, 14: 18, 13: 23, 32: 19, 10: 20, 43: 16, 50: 18, 3: 12, 42: 17, 49: 18, 37: 15, 2: 13}
17:50:17 - INFO - Quality metrics calculated:
17:50:17 - INFO -   Silhouette: 0.456
17:50:17 - INFO -   Davies-Bouldin: 0.665
17:50:17 - INFO - 
üìä Clustering Results:
17:50:17 - INFO -    Clusters: 53
17:50:17 - INFO -    Noise: 378 (22.3%)
17:50:17 - INFO -    Silhouette: 0.456
17:50:17 - INFO -    Davies-Bouldin: 0.665
17:50:17 - INFO - 
================================================================================
17:50:17 - INFO - META-CLUSTERING (Hierarchical Grouping)
17:50:17 - INFO - ================================================================================
17:50:17 - INFO - Clustering 53 fine-grained clusters into meta-clusters...
17:50:17 - INFO - Meta-clusters detected: 2
17:50:17 - INFO - Unclustered fine clusters: 13
17:50:17 - INFO - Meta-clustering Silhouette: 0.152
17:50:17 - INFO - Meta-clustering Davies-Bouldin: 1.686
17:50:17 - INFO - 
üìä Analyzing clusters...
17:50:17 - INFO - 
================================================================================
17:50:17 - INFO - EXTRACTING TEMPORAL DATA
17:50:17 - INFO - ================================================================================
/Users/nicocamacho/Documents/Tesis/observatorio-demanda-laboral/scripts/clustering_analysis.py:150: UserWarning: pandas only supports SQLAlchemy connectable (engine/connection) or database string URI or sqlite3 DBAPI2 connection. Other DBAPI2 objects are not tested. Please consider using SQLAlchemy.
  df = pd.read_sql_query(query, conn)
/Users/nicocamacho/Documents/Tesis/observatorio-demanda-laboral/scripts/clustering_analysis.py:154: UserWarning: Converting to PeriodArray/Index representation will drop timezone information.
  df['quarter_str'] = df['quarter'].dt.to_period('Q').astype(str)
17:50:17 - INFO -    ‚úÖ Extracted temporal data
17:50:17 - INFO -    Quarters: 17
17:50:17 - INFO -    Date range: 2016Q2 - 2025Q4
17:50:17 - INFO - 
================================================================================
17:50:17 - INFO - CREATING TEMPORAL MATRIX
17:50:17 - INFO - ================================================================================
17:50:17 - INFO -    ‚úÖ Matrix shape: (17, 54)
17:50:17 - INFO - 
================================================================================
17:50:17 - INFO - GENERATING VISUALIZATIONS
17:50:17 - INFO - ================================================================================
17:50:17 - INFO - 
üé® UMAP scatter plot (enhanced)...
17:50:20 - INFO -    ‚úÖ Saved: umap_scatter.png (enhanced with labels)
17:50:20 - INFO - 
üé® Temporal heatmap...
17:50:21 - INFO -    ‚úÖ Saved: temporal_heatmap.png
17:50:21 - INFO - 
üé® Top clusters evolution...
17:50:21 - INFO -    ‚úÖ Saved: top_clusters_evolution.png
17:50:21 - INFO - 
================================================================================
17:50:21 - INFO - GENERATING HIERARCHICAL VISUALIZATIONS
17:50:21 - INFO - ================================================================================
17:50:21 - INFO - 
üé® Fine-grained view (colored by meta-cluster with annotations)...
17:50:24 - INFO -    ‚úÖ Saved: umap_fine_by_meta.png
17:50:24 - INFO - 
üé® Macro view (top cluster centroids)...
17:50:24 - INFO -    Showing top 40 clusters (by frequency)
17:50:24 - WARNING -    ‚ö†Ô∏è  adjustText not available, labels may overlap
17:50:27 - INFO -    ‚úÖ Saved: umap_macro_centroids.png
17:50:27 - INFO - 
================================================================================
17:50:27 - INFO - SAVING RESULTS
17:50:27 - INFO - ================================================================================
17:50:27 - INFO -    ‚úÖ results.json
17:50:27 - INFO -    ‚úÖ temporal_matrix.csv
17:50:27 - INFO -    ‚úÖ metrics_summary.json
17:50:27 - INFO - 
================================================================================
17:50:27 - INFO - ‚úÖ CLUSTERING COMPLETE
17:50:27 - INFO - ================================================================================
17:50:27 - INFO -    Dataset: pipeline_a_30k_post_final
17:50:27 - INFO -    Skills: 1698
17:50:27 - INFO -    Clusters: 53
17:50:27 - INFO -    Silhouette: 0.456
17:50:27 - INFO -    Output: outputs/clustering/final/pipeline_a_30k_post/
17:50:27 - INFO - ================================================================================
	completed  0  /  500 epochs
	completed  50  /  500 epochs
	completed  100  /  500 epochs
	completed  150  /  500 epochs
	completed  200  /  500 epochs
	completed  250  /  500 epochs
	completed  300  /  500 epochs
	completed  350  /  500 epochs
	completed  400  /  500 epochs
	completed  450  /  500 epochs
Sun Nov  9 17:50:17 2025 Finished embedding
